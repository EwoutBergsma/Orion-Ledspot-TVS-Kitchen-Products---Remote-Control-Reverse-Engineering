esphome:
  name: kitchen-light-controller
  friendly_name: Kitchen Light Controller

esp32:
  board: esp32dev
  framework:
    type: arduino

# Enable logging
logger:

# Enable Home Assistant API
api:
  encryption:
    key: !secret api_encryption

ota:
  - platform: esphome
    password: !secret ota_password

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Kitchen-Light-Controller"
    password: "kEa4Hw8EUbsT"

captive_portal:

remote_transmitter:
  pin: 13
  carrier_duty_percent: 100%

# Code structure:

# How these codes (messages) are built:
# First a warmup: 9000, -4580,
# Then command  
#     On: 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760,
#     Off: 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608,
#     1: 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760
#     2: 506, -1760, 506, -608, 506, -608, 506, -608, 506, -608, 506, -608, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -1760, 506, -608, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -608, 506, -608, 506, -608, 506, -1760, 506, -1760, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -608, 506, -608, 506, -608
#     3: 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 
#     4: 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608,
# Then ending byte, which is supposed to be dynamic, but I will ignore this for now (the receiver only checks for complete identical messages, not just this byte. I.e. we cannot send "off" twice, the second time it will be ignore, but that's not)
#     Version 1: 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608,
#     Version 2: 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -1760, 560, -1760,
# Then the cooldown: 560

button:
  - platform: template
    name: "Turn On"
    on_press:
      - remote_transmitter.transmit_raw:
          code: [9000, -4580, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560]
          repeat:
            times: 3


  - platform: template
    name: "Turn Off"
    on_press:
      - remote_transmitter.transmit_raw:
          code: [9000, -4580, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608,  560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560]
          repeat:
            times: 3

  - platform: template
    name: "Scene 1"
    on_press:
      - remote_transmitter.transmit_raw:
          code: [9000, -4580, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560]
          repeat:
            times: 3

  - platform: template
    name: "Scene 2"
    on_press:
      - remote_transmitter.transmit_raw:
          code: [9000, -4580, 506, -1760, 506, -608, 506, -608, 506, -608, 506, -608, 506, -608, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -1760, 506, -608, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -608, 506, -608, 506, -608, 506, -1760, 506, -1760, 506, -1760, 506, -608, 506, -1760, 506, -1760, 506, -608, 506, -608, 506, -608, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560]
          repeat:
            times: 3

  - platform: template
    name: "Scene 3"
    on_press:
      - remote_transmitter.transmit_raw:
          code: [9000, -4580, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560]
          repeat:
            times: 3

  - platform: template
    name: "Scene 4"
    on_press:
      - remote_transmitter.transmit_raw:
          code: [9000, -4580, 560, -1760, 560, -608, 560, -608, 560, -608, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -1760, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -608, 560, -608, 560, -1760, 560, -608, 560, -1760, 560, -1760, 560, -608, 560]
          repeat:
            times: 3
